/* Copyright (c) FIRST and other WPILib contributors.// Open Source Software; you can modify and/or share it under the terms of// the WPILib BSD license file in the root directory of this project.*/package frc.robot.commands;import java.util.function.BooleanSupplier;import java.util.function.DoubleSupplier;import edu.wpi.first.wpilibj.Timer;import edu.wpi.first.wpilibj2.command.Command;import frc.robot.subsystems.ArmSubsystem;import frc.robot.subsystems.ShooterSubsystem;public class AngleAndShoot extends Command{private ArmSubsystem m_arm;private ShooterSubsystem m_shooter;private DoubleSupplier m_angle;private BooleanSupplier m_shouldShoot;private boolean hasStartedShooting=false;private Timer m_timer=new Timer();public AngleAndShoot(ArmSubsystem arm,ShooterSubsystem shooter,DoubleSupplier angle,BooleanSupplier shouldShoot){addRequirements(arm,shooter);m_arm=arm;m_shooter=shooter;m_angle=angle;m_shouldShoot=shouldShoot;}@Override public void initialize(){m_shooter.spinUpShooter();hasStartedShooting=false;}@Override public void execute(){m_arm.setTarget(m_angle.getAsDouble());if(m_arm.isAtTarget()&&m_shooter.isAtShootingSpeed()){if(m_shouldShoot.getAsBoolean()){m_shooter.setBeltSpeed(1);if(!hasStartedShooting){m_timer.reset();m_timer.start();hasStartedShooting=true;}}else{m_shooter.setBeltSpeed(0);}}}@Override public void end(boolean interrupted){m_arm.setToHandoffAngle();m_shooter.stopShooting();}@Override public boolean isFinished(){return false;}}